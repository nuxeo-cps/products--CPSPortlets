Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
- Actions portlet
- Content portlet (related, pending, last modified, recent documents,
  upcoming events)
- Portlet visibility: effective and expiration dates can be set on portlets.
- Language portlet: translate the current document / folder.
                    delete a translation.
                    change the current language.
- Implementation of an Image widget
- FileDownloaderPatch for File / Image widgets
- Navigation portlet: implementation of a 'Vertical breadcumbs menu' display.
  added a 'show documents' option to show or hide documents.
- API: added a getPortletContext() method that returns the portlet's context.
- API: added a 'create=1' parameter in the getPortletContainer() method to create
  a portlet container if it does not already exist.
- API: added 'src_folder' and 'dest_folder' parameters to movePortlet()
  to move portlets between different folders.
- Document portlet (renders a CPSDocument)
- RSS portlet (renders an RSS feed)
- The Navigation portlet displays folder contents
- The Image portlet supports links (cf. ads, ...)
- Added a 'Switch language' option to the Language portlet.
- Added a 'first item' option in the RSS portlet.
- Added a 'Navigation tree' display mode in the Navigation portlet.
- Added a 'Subfolder contents' display mode in the Navigation portlet.
- Assigned a flexible layout to the Image Portlet to include several images.
- Added a 'Site map' display mode in the 'Navigation Portlet'
- Add a 'show icons' option in the 'Navigation Portlet'
- Added a 'Custom Portlet' to allow users to create their own portlets.
- Added a 'metadata' edition screen
- The Document Portlet can render different layouts.
- Added a 'last published' query type in the Content Portlet that replaces
  the 'last modified' query. 'Last modified' returns even unpublished items. 
- Assigned a non-flexible layout to the Image Portlet.
- Added a Rotating Image Portlet to randomly display ads, banners, etc.
- Added a 'first item' parameter in the Breadcrumbs Portlet to skip the first
  n items.
- the tree root (e.g. 'sections', 'workspaces') can be specified in the
  Navigation portlet.
- The Custom Portlet accepts a javascript method.
- added a title search query parameter for the Content Portlet.
- Document Portlet: support for layout clustersn and the rendering of the container
- Italian translation by Fabio Nosari
Bug fixes:
~~~~~~~~~~
- storing object paths in the RAM cache instead of the objects themselves
  to avoid "ZODB couldn't load state for ... " errors with Squid.
- Portal root portlets were not taken into account.
- 'ptltool.invalidateCacheEntriesByUser()' did not invalidate the cache entries.
- portlet uids generated by copy/paste are now unique per CPS site instance.
- the portlet guard was not taken into account
- added localizations for portlet descriptions.
- the cache size information was not accurate
- added missing cpsportlet_view.pt (closes bug #424)
- 'Add item portlet': a form action url with an absolute path was stored
  in the RAM cache causing content to be created in the wrong folder.
- the Custom Portlet now accepts cache parameters (one per line)
  see doc/cpsportlets-RAMCache-draft.txt.
- fixed the portlet visibility range test.
- moved the portlet visibility check code from _getFolderPortlets() 
  to getPortlets() and passing the correct context to _isPortletVisible()
- The portlet visibility range is only displayed if the portlet is local.
- The portlets' javascript method was not set correctly.
- Upgraded the page templates to the new macro libs names
- made the Document Portlet more robust
- registration fix for the Portlet Visibility Widget
- listPortlets() returned incorrect results when 'portal_types' was empty
  and only local portlets should be listed.
- _getFolderPortlets() returned global portlets
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
- lazy cache invalidation algorithm. cf. render_cache()
- new cache parameters to describe cache objects cf. getCacheObjects()
- new option to pass portlet's attributes in the cache parameters
- new cache parameters on events (event ids, folder paths, portal types)
  that will cause the portlet's cache to expire.
- cache timeout in seconds
- cleanup of users' entries in the cache when they log out.
- added an option to movePortlet() to leave the source portlet in place.
- added a duplicatePortlet() method
- using the 'common' and 'metadata' schemas by default.
- added a listPortlets() method to look for portlets based on search criteria.
- added a slimmed-down 'view' layout for portlets
- added a PortletRAMCache module (previously imported from CPSSkins.RAMCache)
- added a generic portlet widget (CPSPortletWidget). Removed the other widgets.
- using 'switchLanguage' instead of Localizer to select the document language.
- running 'html_slimmer' before storing rendered portlets in the RAM cache.
- added a query parameter in listPortlets() to specify the portal types.
- added an ESI portlet renderer (Edge-Side-Includes)
- using CPSNavigation to list folder contents
- Added an 'Image Link' compound widget (used in the Image Portlet)
- added an icon RAM cache to render image tags by portal type.
- new cache parameter: 'random:' that generates a random integer as a cache index.
- cache objects to monitor can be specified through a path list field.
- listPortlets() searches among all portlet types if an empty 'portal_types'
  is passed as a parameter.
- added a javascript layout style (layout_portlet_js_) with unique CSS
  selector IDs assigned to widgets to show or hide block elements.
- added a portlet visibility range widget
- added methods (isLocal(), isGlobal()) to determine whether a portlet is
  local or global.
- getBreadCrumbs() returns the list of parent folders up to the top folder.
- using '<ul class="cpsskinsMenu">' on menus to dissociate them from other sorts
  of lists.
- content items in the Content Portlet can be rendered and the
  cluster id can be specified.
- added a getCreator() method for portlets
- added getFolders(), getBottomMostFolder() to the portlets tool
- implemented portlet override (see doc/portlet-override.txt)
- added an option in getPortletContainer(..., local=1) to explicitly return
  local portlet containers (and not the tool).
- Breadcrumbs Portlet: added an option to always display the site's root as
  the first item.
