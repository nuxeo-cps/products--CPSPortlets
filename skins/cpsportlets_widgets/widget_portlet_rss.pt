<tal:block define="ds options/datastructure;
                   export request/form/export|nothing;
                   channel ds/channel;
                   first_item ds/first_item;
                   max_items ds/max_items;
                   max_words ds/max_words;
                   display_description ds/display_description|python:0;
                   display_description python: int(display_description);
                   max_words python: display_description and int(max_words) or 0;
                   rssitems python: here.getRSSItems(channel, int(first_item), int(max_items), int(max_words));
                   link_string ds/link_string"
           condition="rssitems">

  <tal:block condition="not:export">
    <ul class="cpsskinsMenu">
      <tal:block repeat="item rssitems">
        <li tal:define="item_url item/url;
                        item_description item/description">
          <a i18n:translate=""
          tal:attributes="href item_url"
          tal:define="display_description python: item_description and display_description">
            <tal:block content="item/title" />
            <span class="itemDescription"
             tal:condition="display_description"
             tal:content="item_description" />
            <tal:block condition="python: link_string and display_description"
             tal:content="structure link_string" />
          </a>
        </li>
      </tal:block>
    </ul>
    <metal:block use-macro="here/cpsportlet_macros/macros/xml_exports" />
  </tal:block>

  <tal:block tal:condition="export">
    <tal:block define="export_macro string:export_${export};
                       items rssitems">
      <metal:block use-macro="here/cpsportlet_macros/macros/?export_macro|
                              here/cpsportlet_macros/macros/export_not_implemented" />
    </tal:block>
  </tal:block>

</tal:block>
