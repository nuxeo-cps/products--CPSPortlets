<tal:block define="ds options/datastructure;
                   portlet nocall:options/portlet;
                   context nocall:options/context_obj|here;
                   context_url context/absolute_url;
                   action ds/action">
  <tal:block condition="python: action == 'translate'">
    <form action="" method="get"
     tal:define="langItems context/getTranslateLangItems"
     tal:condition="langItems"
     tal:attributes="action string:${context_url}/cpsportlet_translate">
     <p i18n:translate="cpsportlets_translate_into">Translate into ...</p>
      <select name="lang">
        <option tal:repeat="item langItems" i18n:translate=""
         tal:content="item/title"
         tal:attributes="value item/lang" />
      </select>
      <button type="submit" i18n:translate="cpsportlets_button_OK">OK</button>
    </form>
  </tal:block>
  <tal:block condition="python: action == 'delete_translation'">
    <form action="" method="get"
     tal:define="langItems context/getDeletableLangItems"
     tal:condition="langItems"
     tal:attributes="action string:${context_url}/cpsportlet_delete_translation">
     <p i18n:translate="cpsportlets_delete_translation">Delete translation ...</p>
      <select name="lang">
        <option tal:repeat="item langItems" i18n:translate=""
         tal:content="item/title"
         tal:attributes="value item/lang" />
      </select>
      <button type="submit" i18n:translate="cpsportlets_button_OK">OK</button>
    </form>
  </tal:block>
  <tal:block condition="python: action == 'switch_language'">
    <form action="" method="get"
     tal:define="langItems context/getSwitchableLangItems"
     tal:condition="langItems"
     tal:attributes="action string:${context_url}/cpsportlet_switch_language">
     <p i18n:translate="cpsportlets_switch_language">Switch to ...</p>
      <select name="lang">
        <option tal:repeat="item langItems" i18n:translate=""
         tal:content="item/title"
         tal:attributes="value item/lang" />
      </select>
      <button type="submit" i18n:translate="cpsportlets_button_OK">OK</button>
    </form>
  </tal:block>
  <tal:block condition="python: action == 'change'">
    <form method="get" action=""
     tal:define="langItems context/getChangeLangItems;
                 language_chooser_id portlet/getId"
     tal:condition="langItems"
     tal:attributes="action string:${context_url}/cpsportlet_change_language">
      <p>
        <label i18n:translate="cpsportlets_change_language"
         tal:attributes="for language_chooser_id"
         >Change language:</label><br/>
        <select name="lang"
          tal:attributes="
          id language_chooser_id;
          onchange python:'var elt = document.getElementById(\'%s\');; if (elt) {elt.submit()}' % language_chooser_id
          ">
          <option tal:repeat="item langItems" i18n:translate=""
           tal:content="item/title"
           tal:attributes="value item/lang" />
        </select>
        <button type="submit" i18n:translate="cpsportlets_button_OK">OK</button>
      </p>
    </form>
  </tal:block>
</tal:block>
