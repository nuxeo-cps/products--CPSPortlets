<metal:html>
  <metal:block use-macro="here/main_template/macros/master">

    <metal:header fill-slot="header">
      <tal:security condition="python: not checkPerm('Manage Portlets', here)"> 
        <tal:block define="dummy request/RESPONSE/unauthorized" />
      </tal:security>
    </metal:header>

    <h1 i18n:translate="heading_portlet_manage_form">Portlet management</h1>

    <metal:main fill-slot="main">
      <tal:block define="ptltool here/portal_cpsportlets;
                         slots ptltool/getPortletSlots">
        <tal:block repeat="slot slots">
          <h2 tal:content="slot" />
          <tal:block define="portlets python:ptltool.getPortlets(context=here, slot=slot)"
                     repeat="portlet portlets">

            <p tal:content="portlet/getId" />

          </tal:block>
        </tal:block>
      </tal:block>

    </metal:main>
  </metal:block>
</metal:html>
