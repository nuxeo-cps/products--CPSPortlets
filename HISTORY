*******************************************
** CPSPortlets V0.4.0 [R1 build 2005/06/02-09:39 by fguillaume]
** SVN URL: https://svn.nuxeo.org/pub/CPSPortlets/trunk Revision: 22058
Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
- Action Portlet: added support for CMF Action Icons
- Add item Portlet: added a standard menu view with optional icons.
- Content Portlet: item icons can be displayed.
- Navigation Portlet: folder prefixes can be specified for the site map.
Bug fixes:
~~~~~~~~~~
- more robust access to metadata for Wiki pages.
- Content Portlet: not displaying '... >>' when the description is empty.
- Extended Site Map (Navigation Portlet): show managers only if the members
  dir isVisible to avoid displaying links to unauthorized dir entries
- negative timeout cache parameter value are not allowed
- portlet RAM cache: fixed bootstrapping problem which caused the portlet
  cleanup date to always be set to None.
- Added more accessibility to the language portlet.
- Content Portlet: rendered content items where not rendered in the
  correct context.
- removed extra '/view' from breadcrumbs item urls.
- optimization in getContentItems(): the folder path was evaluated even when
  the no path was given.
- breadcrumbs did not show the last item if it is not a folder (#681)
- getPortlets() fix when attempting to remove a portlet from the list.
- fix when 'portlet' is not passed as an argument.
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
- added a RAM cache for storing action icons image tags
- optimizations: the base url is computed only once per request.
- getFolderItems.py: can return metadata, can hide folders, can hide
  hidden documents
- renamed the 'getMetaData' parameter as 'get_metadata'
- Breadcrumbs: the last trail item can be highlighted (visual hint).
- getFolderItems.py: returns item ids.
- Cache parameters are now stored in the portlet tool (managed through the ZMI)
- API simplification: the 'ptype_id' argument is not used in resetCacheTimeout()
- trivial optimizations in widget_portlet_navigation.pt
- Portlet box states are stored in a cookie instead of being persistent.
- getParentItem() now returns the first authorized parent folder
  (or finally: the portal)

*******************************************
** CPSPortlets V0.3.1 [R1 build 2005/04/13-15:34 by madarche]

Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
-
Bug fixes:
~~~~~~~~~~
- Updated i18n with new version of update_pos.
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
-

*******************************************
** CPSPortlets V0.3.0 [R1 build 2005/04/13-09:40 by ben]

Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
- Navigation Portlet: several tree roots (sections, workspaces) can be
  specified.
- Added syndication for RSS Portlet, Content Portlet, Internal Links Portlet.
- added an option to display item descriptions in the Internal Links Portlet.
- Content Portlet: added an option to do a search on all existing documents.
- Navigation portlet: added an 'Up to folder parent' display mode.
- Text portlet: the text content can be translated.
- Navigation portlet: added an option to show / hide hidden folders
- Navigation portlet: added an 'Extended site map' display mode along with
  configuration options (display_description, display_managers,
  authorized_only)
- added a help title on the XML syndication buttons.
- added a configuration option to display item descriptions for portlets
  that show a list of items.
- added a configuration option to display short xml export name in buttons
  i.e. "RSS", "ATOM" instead of "RSS 1.0", "ATOM 0.3"
- syndication formats are disabled by default.
- adding a help message in the portlet edit form to explain the difference
  between generic and extended portlets.
Bug fixes:
~~~~~~~~~~
- Removed warnings: replaces CMFCore.CMFCorePermissions by CMFCore.permissions.
- Added a fallback to CMF 1.4 for CMFCorePermissions since CPSPortlets is used
  on CPS-3.2.x instances.
- Action Portlet: updated the computed cache index to make it work with the
  CMF 1.5 action information representation.
- removed the 'wf_actions' cache parameter
  (it is a special case of actions:workflow)
- Document portlet, Content Portlet: added a fallback in case the 
  'layout_clusters' property is not set as a list.
- fine-tuned cache parameters
- the 'cache_timeout' portlet attribute was not updated according to the
  specified cache parameter.
- removed useless 'i18n' attribute for language-dependent portlets.
  These parameters are set site-wide in 'getPortletCacheParams.py'
- the cache timeout attribute is updated when the Custom Portlet gets edited
  and when it contains a 'timeout:...' custom cache parameter.
- portlet visibility: some invisible portlets were displayed.
- custom cache parameters are reset for global portlets too.
- getFolderItems.py did not work behind virtual hosts
- fixed syndication urls for the Internal Links Portlet.
- Content Portlet: the sort_on and sort_order options were ignored.
- Cosmetic: fixed bug #564
- UI: Language Portlet added a submit button next to the select widget.
- cosmetic: replaced <br> separator in Action Portlet with <li>
- test fix: testPortletWidgets.py
- test fix by reseting the default environnement setup by CPSDefault.
- HTML harmonization in the display of item descriptions.
- Search portlet: i18n label fix
- temporary fix for incorrect node.get('is_open') information returned by 
  CPSNavigation
- Language Portlet: the OK <button> is a submit widget.
- Content Portlet: removed empty description tags. 
  Taking into account the "Display description" option.
- Language Portlet: not submitting the form when the language selection
  is changed now that there is a submit button.
- Language Portlet: updated cache parameters (30-minute timeout, user)
- Internal Links Portlet: catching TypeError expection in the conversion
  from list to string (metadata information).
- updated the portlet export dictionary format in the ZMI
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
- optimized the portlets tool notify_event() method by not fetching the
  content of the notification object.
- using cluster 'metadata' instead of layout 'metadata'
- a layout cluster can be specified in the Content Portlet for rendering items.
- added an export infrastructure (rss, atom, etc.) for portlets that list items.
- added an RSS 1.0 / 2.0 exporter
- harmonization in the HTML code of portlets containing list items.
- added the portal's title in syndication feed titles.
- added ATOM 0.3 export
- Portlet cache: added language discrimination for portlets that have the 'i18n'
  attribute set.
- using "itemDescription" class for item descriptions.
- updated html_slimmer() to reduce the size of rendered HTML by ~20-25%
- using CPSNavigation to obtain information about open nodes.

*******************************************
** CPSPortlets V0.2.0 [R1 build 2005/03/07-15:48 by madarche]

Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
- Custom Portlet: the 'i18n' cache parameter for portlets that are 
  language-dependent can be set directly in the portlet edit form.
- Folderish documents listed as documents in folders will not be
  visible if the 'show documents' options is turned off.
- Text Portlet: the rendering format can be selected ('text', 'stx', 'html')
- Navigation Portlet: added a 'collapsible menu' presentation.
- (Rotating) Image Portlet: add an optional 'caption' field to display
  under the image.
- Added Swedish translation
- Navigation Portlet: the portlet's own folder can be used as the
  reference folder when listing folder items.
  Added an option to specify the relative path of the folder to display.
- Internal Links: refactored the rendering of the link items to support
  more options (show icons, number of words in the title).
- Document Portlet: added an option to render the specified cluster
  exclusively.
Bug fixes:
~~~~~~~~~~
- added missing 'is_i18n' parameter to getSearchableTypesVocabulary()
- rebuilding newly created portlets to set cache parameters and
  javascript settings.
- resetInterestingEvents should not set empty events like ((), (), (),)
  this fixes the test_listPortletsInterestedInEvent() test that failed.
- XHTML fix in the Content Portlet (<h5> not allowed in <a>)
- Breadcrumbs Portlet / Navigation Portlet with vertical breadcrumbs:
  added support for Virtual Hosting (/cps => /) to include the site root as
  the first displayed item.
- Content portlet: not displaying the document's title if the content
  of each item is rendered.
- i18n fr.po fix: "surchargement" => "surcharge"
- Search Portlet: fixed the contextual search url.
- added a 'baseurl' cache index for portlets that need to cache the base url.
- we check first that the object notified by the event is a proxy before
  calling getContent() on it in notify_event().
- getFolderItems(): url fixes for rewrite rules with '_vh_'
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
- added an access key to access the portlet management panels.
  default: ALT + '_'
- added an internal RAM cache to store Factory-type information
- ptltool.clearCache() also clears the icon and FTI cache.
- the RAM cache is cleared with CPSPortlets is updated / installed
- added an 'override' parameter in getPortlets(), i.e. override=0 will
  disable portlet override.
- added a 10 minutes timeout on the BreadCrumbs Portlet's cache parameters..
- converted instance(cls, ListType) to python 2.3's isinstance(cls, list).
  (resp. TupleType => tuple, IntType => int, StringType => str)
- Search portlet: the search prefix can be the folder inside which the
  portlet is physically located.
- getFolderItems() takes an optional 'max_title_words' parameter to only
  display the first words of the items' title with an ellipsis (...).
- added a 'baseurl' cache parameter.
- added a 'display_hidden_folders' parameter (default: on) in getFolderItems()
- added a getVisibilityRangeMsgid() method that returns the msgid of a
  portlet's visiblity range.
- added a 'check_visibility' parameter to getPortlets() to make it possible
  to turn off the portlet visibility check.

*******************************************
** CPSPortlets V0.1.0 [R1 build 2005/01/28-15:09 by madarche]

Requires:
~~~~~~~~~
-
New features:
~~~~~~~~~~~~~
- Actions portlet
- Content portlet (related, pending, last modified, recent documents,
  upcoming events)
- Portlet visibility: effective and expiration dates can be set on portlets.
- Language portlet: translate the current document / folder.
                    delete a translation.
                    change the current language.
- Implementation of an Image widget
- FileDownloaderPatch for File / Image widgets
- Navigation portlet: implementation of a 'Vertical breadcumbs menu' display.
  added a 'show documents' option to show or hide documents.
- API: added a getPortletContext() method that returns the portlet's context.
- API: added a 'create=1' parameter in the getPortletContainer() method to create
  a portlet container if it does not already exist.
- API: added 'src_folder' and 'dest_folder' parameters to movePortlet()
  to move portlets between different folders.
- Document portlet (renders a CPSDocument)
- RSS portlet (renders an RSS feed)
- The Navigation portlet displays folder contents
- The Image portlet supports links (cf. ads, ...)
- Added a 'Switch language' option to the Language portlet.
- Added a 'first item' option in the RSS portlet.
- Added a 'Navigation tree' display mode in the Navigation portlet.
- Added a 'Subfolder contents' display mode in the Navigation portlet.
- Assigned a flexible layout to the Image Portlet to include several images.
- Added a 'Site map' display mode in the 'Navigation Portlet'
- Add a 'show icons' option in the 'Navigation Portlet'
- Added a 'Custom Portlet' to allow users to create their own portlets.
- Added a 'metadata' edition screen
- The Document Portlet can render different layouts.
- Added a 'last published' query type in the Content Portlet that replaces
  the 'last modified' query. 'Last modified' returns even unpublished items. 
- Assigned a non-flexible layout to the Image Portlet.
- Added a Rotating Image Portlet to randomly display ads, banners, etc.
- Added a 'first item' parameter in the Breadcrumbs Portlet to skip the first
  n items.
- the tree root (e.g. 'sections', 'workspaces') can be specified in the
  Navigation portlet.
- The Custom Portlet accepts a javascript method.
- added a title search query parameter for the Content Portlet.
- Document Portlet: support for layout clustersn and the rendering of the container
- Italian translation by Fabio Nosari
- Navigation portlet: (navigation tree / sitemap) the end depth can be specified.
Bug fixes:
~~~~~~~~~~
- storing object paths in the RAM cache instead of the objects themselves
  to avoid "ZODB couldn't load state for ... " errors with Squid.
- Portal root portlets were not taken into account.
- 'ptltool.invalidateCacheEntriesByUser()' did not invalidate the cache entries.
- portlet uids generated by copy/paste are now unique per CPS site instance.
- the portlet guard was not taken into account
- added localizations for portlet descriptions.
- the cache size information was not accurate
- added missing cpsportlet_view.pt (closes bug #424)
- 'Add item portlet': a form action url with an absolute path was stored
  in the RAM cache causing content to be created in the wrong folder.
- the Custom Portlet now accepts cache parameters (one per line)
  see doc/cpsportlets-RAMCache-draft.txt.
- fixed the portlet visibility range test.
- moved the portlet visibility check code from _getFolderPortlets() 
  to getPortlets() and passing the correct context to _isPortletVisible()
- The portlet visibility range is only displayed if the portlet is local.
- The portlets' javascript method was not set correctly.
- Upgraded the page templates to the new macro libs names
- made the Document Portlet more robust
- registration fix for the Portlet Visibility Widget
- listPortlets() returned incorrect results when 'portal_types' was empty
  and only local portlets should be listed.
- _getFolderPortlets() returned global portlets
- some tools in the site root were not filtered out by ptltool.getFolders().
New internal features:
~~~~~~~~~~~~~~~~~~~~~~
- lazy cache invalidation algorithm. cf. render_cache()
- new cache parameters to describe cache objects cf. getCacheObjects()
- new option to pass portlet's attributes in the cache parameters
- new cache parameters on events (event ids, folder paths, portal types)
  that will cause the portlet's cache to expire.
- cache timeout in seconds
- cleanup of users' entries in the cache when they log out.
- added an option to movePortlet() to leave the source portlet in place.
- added a duplicatePortlet() method
- using the 'common' and 'metadata' schemas by default.
- added a listPortlets() method to look for portlets based on search criteria.
- added a slimmed-down 'view' layout for portlets
- added a PortletRAMCache module (previously imported from CPSSkins.RAMCache)
- added a generic portlet widget (CPSPortletWidget). Removed the other widgets.
- using 'switchLanguage' instead of Localizer to select the document language.
- running 'html_slimmer' before storing rendered portlets in the RAM cache.
- added a query parameter in listPortlets() to specify the portal types.
- added an ESI portlet renderer (Edge-Side-Includes)
- using CPSNavigation to list folder contents
- Added an 'Image Link' compound widget (used in the Image Portlet)
- added an icon RAM cache to render image tags by portal type.
- new cache parameter: 'random:' that generates a random integer as a cache index.
- cache objects to monitor can be specified through a path list field.
- listPortlets() searches among all portlet types if an empty 'portal_types'
  is passed as a parameter.
- added a javascript layout style (layout_portlet_js_) with unique CSS
  selector IDs assigned to widgets to show or hide block elements.
- added a portlet visibility range widget
- added methods (isLocal(), isGlobal()) to determine whether a portlet is
  local or global.
- getBreadCrumbs() returns the list of parent folders up to the top folder.
- using '<ul class="cpsskinsMenu">' on menus to dissociate them from other sorts
  of lists.
- content items in the Content Portlet can be rendered and the
  cluster id can be specified.
- added a getCreator() method for portlets
- added getFolders(), getBottomMostFolder() to the portlets tool
- implemented portlet override (see doc/portlet-override.txt)
- added an option in getPortletContainer(..., local=1) to explicitly return
  local portlet containers (and not the tool).
- Breadcrumbs Portlet: added an option to always display the site's root as
  the first item.
- added a setCustomCacheParams() mutator for setting custom cache parameters
  to portlet types that support it.

